<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./OpenFPCI-api-1.0.css" type="text/css" />
<title>./OpenFPCI-api-1.0</title>
<!-- Source: ./../src/paraFEM/ -->
<!-- Generated with ROBODoc Version 4.99.38 (Jan 10 2018) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc">OpenFPCI API (Version 1.0)</a>
</div> <!-- logo -->
<a name="robo0"></a>
<a name="2fdyparafemsubroutines"></a>
<h1>1.  /dyparafemsubroutines [ Modules ]  </h1>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ Modules ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>dyparafemsubroutines</strong> - Collection of fortran subroutines                          
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    This group of subroutines is compiled into an
    object file and added to the makefile of the
    top level solver. 

    The following needs to be added to the Make/options,
    file present in the Foam-Extend solver directory.

    "path to folder"/<strong>dyparafemsubroutines</strong>.o \
    -L/"path To paraFEM"/lib -lParaFEM_mpi.5.0.3 \
    -L/"path To paraFEM"/lib -larpack_linuxdesktop \
    -lgfortran \
    -L/"Path To Mpi"/lib -lmpi_f90 \

    
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This is a group of subroutines required for the OpenFPCI.
    These routines are based on the decomposition of program 12.9 
    found in "Programming the Finite Element Method".
    P12.9 is the parallel analysis of the forced vibration of a
    linear elastic solid.
    
    The routines provide an interface between Foam-Extend and 
    ParaFEM. The subroutines are generated by decomposing the 
    driver program in ParaFEM (P12.9) such that data can be read
    between the two applications. A small summary of the 
    subroutines contained in this file and their purpose is
    provided.
 
    Subroutine           Purpose      

    <a href="#robo8">initparafem</a>          Generates initial matricies and arrays
    <a href="#robo4">finddiagparafem</a>      Finds the diagonal preconditioner
    <a href="#robo13">runparafem</a>           Solves the governing equations     
    <a href="#robo3">checkparafem</a>         Writes mesh and geometry to file (ensi)
    <a href="#robo2">checkforce</a>           Writes the loads to file (ensi)
    <a href="#robo9">of2sg</a>                Foam-Ex to Smith-Griffiths mesh formats
    <a href="#robo7">gloads</a>               Applies gravity loads
   
    <a href="#robo10">populate_g_coord_pp</a>  Populate g_coord_pp array
    <a href="#robo11">populate_g_coord_pp2</a> Populate g_coord_pp array
    <a href="#robo12">populate_g_num_pp</a>    Populate g_num_pp array

    <a href="#robo17">writeToFile</a>          Writes float field to file
    <a href="#robo18">writeToFileInt</a>       Writes int field to file

    <a href="#robo16">system_mem_usage</a>     Track Memory usage
 
    Functions            Purpose       

    <a href="#robo5">findnelspp</a>           Returns nels_pp to c++
    <a href="#robo6">findneqpp</a>            Returns neq_pp to c++
    <a href="#robo14">setielstart</a>          Set element start number
    <a href="#robo15">setnelspp</a>            Set number of elements/processor
    <a href="#robo1">calcnelsppof</a>         Calculate number of elements/processor
</pre>
<p class="item_name">AUTHOR</p>
<pre>      S.Hewitt
</pre>
<p class="item_name">COPYRIGHT</p>
<pre>    (c) University of Manchester 1996-2017
</pre>
<a name="robo1"></a>
<a name="dyparafemsubroutines2fcalcnelsppof"></a>
<h2>1.1.  dyparafemsubroutines/calcnelsppof [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>calcnelsppof</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Unused in current version
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function is used to calculate the number 
    of elements per processor, it is a very primitive 
    form of mesh decomposition assigning elements to
    processors in order
</pre>
<p class="item_name">WARNINGS</p>
<pre>    This is a deprecated routine
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo2"></a>
<a name="dyparafemsubroutines2fcheckforce"></a>
<h2>1.2.  dyparafemsubroutines/checkforce [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>checkforce</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: checkforce_(force,sense,node_ensi,&amp;solidPatchIDSize,&amp;
                               paraFemSolidDisp,&amp;numPoints);                                 
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Prints the forces to file in ENSI GOLD format  
</pre>
<p class="item_name">INPUTS</p>
<pre>    force  (loaded_nodes*ndim)  - Mesh coordinates 
    sense  (loaded_nodes*ndim)  - Vector to define x,y,z 
    node   (loaded_nodes*ndim)  - Node Numbers of loaded nodes
    solidPatchIDSize            - Size of boundary Mesh     
    nn                          - # of Nodes                        
</pre>
<p class="item_name">OUTPUT</p>
<pre>      Writes to file "argv".ensi.NDLDS
      Contains information about loads on nodes
                    
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
    L. Margetts
</pre>
<a name="robo3"></a>
<a name="dyparafemsubroutines2fcheckparafem"></a>
<h2>1.3.  dyparafemsubroutines/checkparafem [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>checkparafem</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: checkparafem_(MeshData,g_num_OF,rest_ensi,       &amp;
                    &amp;numPoints,&amp;numCells);
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Writes the mesh to file in ensi gold format 
</pre>
<p class="item_name">INPUTS</p>
<pre>    g_coord   (ndim,nn)    - Mesh coordinates               
    g_num     (nod,nels)   - Steering Matrix (x-y-z)                                
    rest_ensi (nodof+1,nr) - Restrained Nodes
    nn                     - # of Nodes 
    els=nels               - # of Elements/Cells
                    
</pre>
<p class="item_name">OUTPUT</p>
<pre>    Writes to file "argv".ensi.case and oter. "argv".ensi.xxx files
    Contains information about Mesh, Material, Geometry and Restraints

    File    Description 

    MATID   Material ID's
    NDLDS   Loaded Nodes
    NDBND   Restrained Nodes 
    geo     Geometery File
    case    Case file
</pre>
<p class="item_name">WARNINGS</p>
<pre>    It currently only works in serial.
</pre>
<p class="item_name">TODO</p>
<pre>    * Clean and update
    * Write to work in parallel
                    
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo4"></a>
<a name="dyparafemsubroutines2ffinddiagparafem"></a>
<h2>1.4.  dyparafemsubroutines/finddiagparafem [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>finddiagparafem</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: finddiagparafem_(store_km_pp_OF_,store_mm_pp_OF_,      &amp;
                            numSchemes_,diag_precon_pp_OF_); 
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Calculates the diagonal preconditioner vector used 
    in the PCG solution.
</pre>
<p class="item_name">INPUTS</p>
<pre>    store_km_pp (ntot,ntot,nels_pp)  - Stiffness Matrix     
    store_mm_pp (ntot,ntot,nels_pp)  - Mass Matrix

    numVar      (a1 b1 theta dTim)   - Numerical Variables                  
                            
</pre>
<p class="item_name">OUTPUT</p>
<pre>    diag_precon_pp (neq_pp)          - Diagonal Preconditioner
                    
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo5"></a>
<a name="dyparafemsubroutines2ffindnelspp"></a>
<h2>1.5.  dyparafemsubroutines/findnelspp [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>findnelspp</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Unused in current version
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function acts an access fuction for the
    Foam-Extend code, it returns the value of 
    nels_pp, the number of elements per processor 
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo6"></a>
<a name="dyparafemsubroutines2ffindneqpp"></a>
<h2>1.6.  dyparafemsubroutines/findneqpp [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    <a href="#robo15">setnelspp</a>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: const int neq_pp_OF = findneqpp_();
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function is used to return the neq_pp, the
    number of equations per processor to Foam-Extend
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo7"></a>
<a name="dyparafemsubroutines2fgloads"></a>
<h2>1.7.  dyparafemsubroutines/gloads [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>gloads</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: gloads_(gravlo_,&amp;specWeight,&amp;gPoints_,&amp;nodof,&amp;nod,&amp;ndim,
                   &amp;numRestrNodes_, mPoints_,g_num_pp_OF_,rest_);     
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Supplies a gravitational force vector   
</pre>
<p class="item_name">INPUTS</p>
<pre>    specWeight   - Specific Weight (density  * gravitaional loading)
    nn           - Total number of nodes in mesh
    nodof        - Number of degrees of freedom per node
    nod          - Number of Nodes per Element
    ndim         - Number of dimensions             
    nr           - Number of restrained nodes       

    g_num_pp (nod,nels_pp)  - Element Steering matrix
    g_coord  (ndim,nn)      - Global Coordinate matrix
    rest     (nr,nodof+1)   - Matrix of restrained nodes
</pre>
<p class="item_name">OUTPUT</p>
<pre>    gravlo   (0:neq_pp)     - Vector of loads
            
</pre>
<p class="item_name">WARNINGS</p>
<pre>    * Default direction is negative Y
    * REST must be rearranged before function call
    * Currently only works in serial        
</pre>
<p class="item_name">TODO</p>
<pre>    * Write to work in Parallel
    * Remove need for global coordinate matrix
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo8"></a>
<a name="dyparafemsubroutines2finitparafem"></a>
<h2>1.8.  dyparafemsubroutines/initparafem [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>initparafem</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: initparafem_(mPoints_,g_num_pp_OF_,rest_,&amp;gPoints,
                   &amp;gCells,&amp;numRestrNodes_,solidProps_,
                   g_g_pp_OF_,store_km_pp_OF_,store_mm_pp_OF_);
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Initialises ParaFEM, this inculdes initialising the MPI
    calculating the stiffness matrix [k], Mass Matrix [M] 
      and steering matrix (g_g_pp).
</pre>
<p class="item_name">INPUTS</p>
<pre>    g_coord   (ndim,nn)     - Coordinates of the mesh               
    g_num_pp  (nod,nels_pp) - Steering matrix                               
    rest      (nr,nodof+1)  - Restrained Nodes, e.g.(# x y z)

    nn                      - Number of Nodes
    nels                    - Number of elements
    nr                      - Number of restrained Nodes

    solidProp (e v rho)     - Solid Properties       
                            
</pre>
<p class="item_name">OUTPUT</p>
<pre>    g_g_pp      (ntot,nels_pp)      - Global Steering Matrix
    store_km_pp (ntot,ntot,nels_pp) - Stiffness Matrix [k]
    store_mm_pp (ntot,ntot,nels_pp) - Mass Matrix [M]
                    
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo9"></a>
<a name="dyparafemsubroutines2fof2sg"></a>
<h2>1.9.  dyparafemsubroutines/of2sg [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>of2sg</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage:      <strong>of2sg</strong>(element,g_num_pp(:,iel)) 
</pre>
<p class="item_name">FUNCTION</p>
<pre>    It rearranges the steering matrix from Foam-Extend format
    to Smith-Griffiths format
</pre>
<p class="item_name">INPUTS</p>
<pre>    element - Element Type  
    nod     - Number of nodes per element
</pre>
<p class="item_name">OUTPUT</p>
<pre>    vector  - New element node orders
</pre>
<p class="item_name">TODO</p>
<pre>    * Include tetrahedral elements
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo10"></a>
<a name="dyparafemsubroutines2fpopulate5fg5fcoord5fpp"></a>
<h2>1.10.  dyparafemsubroutines/populate_g_coord_pp [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>populate_g_coord_pp</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>populate_g_coord_pp</strong>(g_coord,g_coord_pp,g_num_pp,    &amp;
                                         npes,nn,nod,ndim)
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Populates g_coord_pp based on g_coord. It takes the global
    list of coordinates and reduces them to the local coordinate 
    lists based on the steering matrix g_num_pp.
    It is used when the decomposition is done using ParaFEMs
    methods
</pre>
<p class="item_name">INPUTS</p>
<pre>    g_coord  (ndim,nn)  - Mesh coordinates  
    g_num_pp (nod,nels) - Steering Matrix   
    
    npes                - Number of processes
    nn                  - Number of nodes 
    nod                 - Number of nodes per element
    ndim                - Number of dimensions per node               
                    
</pre>
<p class="item_name">OUTPUT</p>
<pre>      g_coord_pp (nod,ndim,nels_pp) - Coordinate matrix
</pre>
<p class="item_name">WARNINGS</p>
<pre>    This version has been outdated by <a href="#robo11">populate_g_coord_pp2</a>.
</pre>
<p class="item_name">AUTHOR</p>
<pre>    Sam Hewitt
</pre>
<p class="item_name">CREATION DATE</p>
<pre>    28th September 2016
</pre>
<p class="item_name">COPYRIGHT</p>
<pre>    (c) University of Manchester 2007-2016
</pre>
<a name="robo11"></a>
<a name="dyparafemsubroutines2fpopulate5fg5fcoord5fpp2"></a>
<h2>1.11.  dyparafemsubroutines/populate_g_coord_pp2 [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>populate_g_coord_pp2</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>populate_g_coord_pp2</strong>(g_coord,g_coord_pp,g_num_pp,   &amp;
                                         nod,ndim)
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Populates g_coord_pp based on g_coord. It takes the global
    list of coordinates and reduces them to the local coordinate 
    lists based on the steering matrix g_num_pp.
    It is used when decomposition has been done by Foam-Extend
</pre>
<p class="item_name">INPUTS</p>
<pre>    g_coord  (ndim,nn)  - Mesh coordinates          
    g_num_pp (nod,nels) - Steering Matrix           
    nn                  - Number of nodes 
    nod                 - Number of nodes per element
    ndim                - Number of dimensions per node             
</pre>
<p class="item_name">OUTPUT</p>
<pre>      g_coord_pp (nod,ndim,nels_pp) - Coordinate matrix
</pre>
<p class="item_name">AUTHOR</p>
<pre>    Sam Hewitt
</pre>
<p class="item_name">CREATION DATE</p>
<pre>    6th May 2017
</pre>
<p class="item_name">COPYRIGHT</p>
<pre>    (c) University of Manchester 2007-2016
</pre>
<a name="robo12"></a>
<a name="dyparafemsubroutines2fpopulate5fg5fnum5fpp"></a>
<h2>1.12.  dyparafemsubroutines/populate_g_num_pp [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>populate_g_num_pp</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>populate_g_num_pp</strong>(g_num,g_num_pp,npes,nod,nels)
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This subroutine was used in early versions of the code to
    distribute a global steering matrix to a local one
</pre>
<p class="item_name">INPUTS</p>
<pre>    g_num  (nod,nels)      - Global steering matrix         
    g_num_pp (nod,nels_pp) - Local Steering Matrix          
    npes                   - Number of Processors 
    nod                    - Number of nodes per element
    nels                   - Total Number elements  
</pre>
<p class="item_name">WARNINGS</p>
<pre>    This subroutine is currently not used it was relevant in
    a previous version.
</pre>
<p class="item_name">AUTHOR</p>
<pre>    Sam Hewitt
</pre>
<p class="item_name">CREATION DATE</p>
<pre>    28th September 2016
</pre>
<p class="item_name">COPYRIGHT</p>
<pre>    (c) University of Manchester 2007-2016
</pre>
<a name="robo13"></a>
<a name="dyparafemsubroutines2frunparafem"></a>
<h2>1.13.  dyparafemsubroutines/runparafem [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>runparafem</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: runparafem_(numSchemes_,fext_OF_,forceNodes_,          &amp;
            &amp;numFixedForceNodes_,&amp;time,&amp;lPoints,g_g_pp_OF_,       &amp;
            g_num_pp_OF_,store_km_pp_OF_,store_mm_pp_OF_,         &amp;
            diag_precon_pp_OF_,gravlo_,ptDtemp_,ptUtemp_,ptAtemp_);
</pre>
<p class="item_name">FUNCTION</p>
<pre>    Reads in the current timesteps displacement, velocity, 
    acceleration and external force field. Loads the structure    
    and solves the governing equations of the problem

        {F} = [M]{a} + [C]{u} + [K]{d} 

    The new displacement, velocity and acceleration fields are
    output.
</pre>
<p class="item_name">INPUTS</p>
<pre>    numVar      (a1 b1 theta dTim)   - Numerical Variables
    val         (ndim,loaded_nodes)  - Force vector of loaded nodes
    node        (loaded_nodes)       - Node # of loaded_nodes

    loaded_nodes                     - # of loaded nodes              
    time                             - Current time
    nodes_pp                         - # of nodes per cores

    g_g_pp      (ntot,nels_pp)       - Equation steering matrix
    g_num_pp    (nod,nels_pp)        - Element steering matrix
    store_km_pp (ntot,ntot,nels_pp)  - Stiffness Matrix [k]
    store_mm_pp (ntot,ntot,nels_pp)  - Mass Matrix [M]

    diag_precon_pp (neq_pp)          - Diagonal Preconditioner      
    gravlo         (neq_pp)          - Vector of gravity loads      
                            
</pre>
<p class="item_name">OUTPUT</p>
<pre>    Dfield  (ntot,nels_pp)           - Nodal displacements
    Ufield  (ntot,nels_pp)           - Nodal velocities
    Afield  (ntot,nels_pp)           - Nodal accelerations
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo14"></a>
<a name="dyparafemsubroutines2fsetielstart"></a>
<h2>1.14.  dyparafemsubroutines/setielstart [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>setielstart</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>setielstart</strong>()
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function is used by <a href="#robo8">initparafem</a> to set
    the starting element number on each processor 
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo15"></a>
<a name="dyparafemsubroutines2fsetnelspp"></a>
<h2>1.15.  dyparafemsubroutines/setnelspp [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>setnelspp</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: setnelspp_(&amp;nels_pp_OF);
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function is used to set an input variable
    to the number of elements per processor, nels_pp
</pre>
<p class="item_name">INPUTS</p>
<pre>    nCells  - Number of Cells
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo16"></a>
<a name="dyparafemsubroutines2fsystem5fmem5fusage"></a>
<h2>1.16.  dyparafemsubroutines/system_mem_usage [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>system_mem_usage</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>system_mem_usage</strong>(ValueA,ValueB)    
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function reads the /proc/procnum file of the
    current process and outputs the RSS and VM memory
    values, copying them into the inputs
</pre>
<p class="item_name">INPUTS</p>
<pre>    valueRSS   - RSS Memory (Resident Set Size)
    valueVM    - VM Memory  (Virtual Memory)        
</pre>
<p class="item_name">WARNINGS</p>
<pre>    If you are using a intel compiler, you must include 
    the ifport module
</pre>
<p class="item_name">NOTES</p>
<pre>    https://stackoverflow.com/questions/22028571/track-memory-usage-in-fortran-90
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo17"></a>
<a name="dyparafemsubroutines2fwriteToFile"></a>
<h2>1.17.  dyparafemsubroutines/writeToFile [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>writeToFile</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>writeToFile</strong>(10,"g_num_pp.txt",g_num_pp,nod*nels_pp)    
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function writes a float field to file. Its main purpose
     is debugging and is not currrently called in the code.  
</pre>
<p class="item_name">INPUTS</p>
<pre>    filenum   - File Number, any positive Integer
    filename  - Name of output file
    field     - Field to loop through
    dim1      - Dimensions of the field
</pre>
<p class="item_name">OUTPUT</p>
<pre>    File of the name "filename" with the field written out          
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo18"></a>
<a name="dyparafemsubroutines2fwriteToFileInt"></a>
<h2>1.18.  dyparafemsubroutines/writeToFileInt [ Functions ]  </h2>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">dyparafemsubroutines</a> ] [ Functions ]</p>
<p class="item_name">NAME</p>
<pre>    SUBROUTINE: <strong>writeToFileInt</strong>
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>    Usage: CALL <strong>writeToFileInt</strong>(10,"g_num_pp.txt",g_num_pp,nod*nels_pp)    
</pre>
<p class="item_name">FUNCTION</p>
<pre>    This function writes an Integer field to file. Its main purpose
     is debugging and is not currrently called in the code.  
</pre>
<p class="item_name">INPUTS</p>
<pre>    filenum   - File Number, any positive Integer
    filename  - Name of output file
    field     - Field to loop through
    dim1      - Dimensions of the field
</pre>
<p class="item_name">OUTPUT</p>
<pre>    File of the name "filename" with the field written out          
</pre>
<p class="item_name">AUTHOR</p>
<pre>    S. Hewitt
</pre>
<a name="robo19"></a>
<a name="SolidSolver2fDyParaFEMSolid2eH"></a>
<h1>2.  SolidSolver/DyParaFEMSolid.H [ Classes ]  </h1>
<p>[ <a href="#robo_top_of_doc">Top</a> ] [ Classes ]</p>
<p class="item_name">FUNCTION</p>
<pre>   DyParaFEMSolid is a solid solver that is included in the
   fluidStructureInteraction library. It acts as a wrapper between
   the ParaFEM fortran subroutines and the Foam-Extend FSI library
</pre>
<p class="item_name">SYNOPSIS</p>
<pre>   DyParaFEMSolid is a class that inherits from solidSolver.
   Important, methods to note are the constructor and evolve
   functions.
    
   During the constructor of this class, <a href="#robo8">initparafem</a> and 
   <a href="#robo4">finddiagparafem</a> are called, initialising ParaFEM and
   calculating the preconditioner. Then each time step
   DyParaFEM::evolve() calls <a href="#robo13">runparafem</a>, that solves the 
   governing equations of the problem. These are the two
   important subroutines from this class.
</pre>
<p class="item_name">AUTHOR</p>
<pre>   S.Hewitt
</pre>
<div id="footer">
<p>Generated from ./../src/paraFEM/ with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.38 on Sat Jan 20 2018 21:10:26
</p>
</div> <!-- footer -->
</body>
</html>
